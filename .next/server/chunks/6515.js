exports.id=6515,exports.ids=[6515],exports.modules={67519:e=>{e.exports={lazyImageContainer:"LazyImage_lazyImageContainer__nrugC",placeholder:"LazyImage_placeholder__xvEon",actualImage:"LazyImage_actualImage__f72BI",hidden:"LazyImage_hidden__b97nL",visible:"LazyImage_visible__rDSZ7"}},39663:e=>{e.exports={productCard:"ProductCard_productCard__kFgss",productImageContainer:"ProductCard_productImageContainer__t8w75",productImage:"ProductCard_productImage__G8kaD",discountBadge:"ProductCard_discountBadge__JTVHy",productActions:"ProductCard_productActions__QlDKC",visible:"ProductCard_visible___Jybh",quickViewButton:"ProductCard_quickViewButton__AqNIn",wishlistButton:"ProductCard_wishlistButton__v47xi",productContent:"ProductCard_productContent__zkitG",productCategory:"ProductCard_productCategory__NUsjG",productName:"ProductCard_productName__Dz1Yx",productRating:"ProductCard_productRating__CsgKm",reviewCount:"ProductCard_reviewCount__w5kXc",productPrice:"ProductCard_productPrice__C_RF9",originalPrice:"ProductCard_originalPrice__9aLmN",currentPrice:"ProductCard_currentPrice__Lag0w",productButtons:"ProductCard_productButtons__xzFaE",viewDetailsButton:"ProductCard_viewDetailsButton__hjiDc",addToCartButton:"ProductCard_addToCartButton__2EnvJ",productInfo:"ProductCard_productInfo__IkzD9",productFooter:"ProductCard_productFooter__6nGZs"}},37050:e=>{e.exports={starRating:"StarRating_starRating__YWLzN",star:"StarRating_star__1QlCd",interactive:"StarRating_interactive__oIQlS",small:"StarRating_small__ZKOs9",medium:"StarRating_medium___jERf",large:"StarRating_large__tTAz5",emptyStar:"StarRating_emptyStar__A53vx",fillContainer:"StarRating_fillContainer__w267h",filledStar:"StarRating_filledStar__c97S5",ratingText:"StarRating_ratingText__9iuvC"}},56515:(e,r,t)=>{"use strict";t.d(r,{Z:()=>w});var i=t(20997),a=t(16689),s=t(41664),o=t.n(s),n=t(25675),c=t.n(n),l=t(67519),d=t.n(l);let u=({src:e,alt:r,width:t,height:s,className:o,placeholderSrc:n="/images/placeholder.svg",threshold:l=.1,...u})=>{let[g,m]=(0,a.useState)(!1),[p,_]=(0,a.useState)(!1),h=(0,a.useRef)(null),y="string"==typeof t&&t.includes("%")?500:parseInt(t,10)||500,w="string"==typeof s&&s.includes("%")?500:parseInt(s,10)||500;return(0,a.useEffect)(()=>{m(!1),_(!1)},[e]),(0,a.useEffect)(()=>{let e=new IntersectionObserver(([r])=>{r.isIntersecting&&(_(!0),e.disconnect())},{threshold:l}),r=h.current;return r&&e.observe(r),()=>{r&&e.disconnect()}},[l]),(0,i.jsxs)("div",{ref:h,className:`${d().lazyImageContainer} ${o||""}`,style:{width:t,height:s},...u,children:[i.jsx("div",{className:`${d().placeholder} ${g?d().hidden:""}`,children:i.jsx(c(),{src:n,alt:r,width:y,height:w,layout:"responsive",objectFit:"contain",priority:!1})}),p&&i.jsx("div",{className:`${d().actualImage} ${g?d().visible:""}`,children:i.jsx(c(),{src:e,alt:r,width:y,height:w,layout:"responsive",objectFit:"contain",onLoadingComplete:()=>{m(!0)},priority:!1})})]})};var g=t(37050),m=t.n(g);let p=({rating:e,maxRating:r=5,size:t="medium",interactive:a=!1,onChange:s})=>{let o=[],n=r=>{let t=e-r+1;return t>=1?100:t>0?100*t:0},c=e=>{a&&s&&s(e)};for(let e=1;e<=r;e++){let r=n(e);o.push((0,i.jsxs)("div",{className:`${m().star} ${a?m().interactive:""} ${m()[t]}`,onClick:()=>c(e),children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:m().emptyStar,children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),i.jsx("div",{className:m().fillContainer,style:{width:`${r}%`},children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:m().filledStar,children:i.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})})})]},e))}return(0,i.jsxs)("div",{className:m().starRating,children:[o,e>0&&i.jsx("span",{className:m().ratingText,children:e.toFixed(1)})]})};var _=t(91672),h=t(39663),y=t.n(h);let w=({product:e})=>{let[r,t]=(0,a.useState)(!1);return(0,i.jsxs)("div",{className:y().productCard,onMouseEnter:()=>{t(!0)},onMouseLeave:()=>{t(!1)},children:[(0,i.jsxs)("div",{className:y().productImageContainer,children:[i.jsx(o(),{href:`/products/${e.slug}`,onClick:()=>(0,_.A0)(e.id),children:i.jsx(u,{src:e.image_url||"/images/placeholder.svg",alt:e.name,className:y().productImage,width:"100%",height:"100%"})}),e.discount_percentage&&e.discount_percentage>0&&(0,i.jsxs)("span",{className:y().discountBadge,children:[e.discount_percentage,"% OFF"]}),(0,i.jsxs)("div",{className:`${y().productActions} ${r?y().visible:""}`,children:[i.jsx("button",{className:y().wishlistButton,title:"Add to Wishlist",onClick:r=>{r.preventDefault();let t=JSON.parse(localStorage.getItem("wishlistItems")||"[]");t.find(r=>r.id===e.id)?alert("This product is already in your wishlist!"):(t.push({id:e.id,name:e.name,price:e.price,image_url:e.image_url}),localStorage.setItem("wishlistItems",JSON.stringify(t)),alert(`${e.name} added to wishlist!`))},children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})}),i.jsx("button",{className:y().quickViewButton,title:"Quick View",onClick:r=>{r.preventDefault(),alert(`Quick view for ${e.name}`)},children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),(0,i.jsxs)("div",{className:y().productContent,children:[i.jsx("div",{className:y().productCategory,children:e.category_name}),i.jsx("h3",{className:y().productName,children:i.jsx(o(),{href:`/products/${e.slug}`,onClick:()=>(0,_.A0)(e.id),children:e.name})}),(0,i.jsxs)("div",{className:y().productRating,children:[i.jsx(p,{rating:e.rating||0,size:"small"}),e.review_count>0&&(0,i.jsxs)("span",{className:y().reviewCount,children:["(",e.review_count,")"]})]}),i.jsx("div",{className:y().productPrice,children:void 0!==e.price&&null!==e.price?e.discount_percentage>0?(0,i.jsxs)("span",{className:y().currentPrice,children:["$",e.price.toFixed(2)]}):(0,i.jsxs)("span",{className:y().currentPrice,children:["$",parseFloat(e.price||0).toFixed(2)]}):i.jsx("span",{className:y().currentPrice,children:"Price unavailable"})}),(0,i.jsxs)("div",{className:y().productButtons,children:[i.jsx(o(),{href:`/products/${e.slug}`,className:y().viewDetailsButton,onClick:()=>(0,_.A0)(e.id),children:"View Details"}),i.jsx("button",{className:y().addToCartButton,onClick:r=>{r.preventDefault();let t=JSON.parse(localStorage.getItem("cartItems")||"[]"),i=t.find(r=>r.id===e.id);i?i.quantity+=1:t.push({id:e.id,name:e.name,price:e.price,image_url:e.image_url,quantity:1}),localStorage.setItem("cartItems",JSON.stringify(t)),alert(`${e.name} added to cart!`)},children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"9",cy:"21",r:"1"}),i.jsx("circle",{cx:"20",cy:"21",r:"1"}),i.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]})})]})]})]})}},91672:(e,r,t)=>{"use strict";t.d(r,{A0:()=>d,Ps:()=>a,Se:()=>m,oj:()=>_});var i=t(18253);let a=async(e,r=8)=>{try{if(e)try{let t=await fetch(`/api/recommendations/personalized?userId=${e}&limit=${r}`);if(t.ok)return await t.json()}catch(e){console.error("Error fetching personalized recommendations from API:",e)}return s(r)}catch(e){return console.error("Error getting personalized recommendations:",e),[]}},s=(e=8)=>{try{let r=(0,i.nO)(),t=(0,i.HS)(),a=n(),s=c(),d=l();return o(r,t,a,s,d).sort((e,r)=>r.score-e.score).slice(0,e)}catch(e){return console.error("Error generating client-side recommendations:",e),[]}},o=(e,r,t,i,a)=>{let s=new Map,o={click:2,view:3,cart:5,wishlist:4,recency:.1},n=Date.now();return r.forEach(e=>{let r=e.productId,t=Math.max(0,24-(n-e.timestamp)/36e5)*o.recency,i=o.click+t;s.has(r)?s.set(r,s.get(r)+i):s.set(r,i)}),t.forEach(e=>{let r=e.id,t=Math.max(0,24-(n-e.timestamp)/36e5)*o.recency,i=o.view+t;s.has(r)?s.set(r,s.get(r)+i):s.set(r,i)}),i.forEach(e=>{let r=e.id,t=o.cart;s.has(r)?s.set(r,s.get(r)+t):s.set(r,t)}),a.forEach(e=>{let r=e.id,t=o.wishlist;s.has(r)?s.set(r,s.get(r)+t):s.set(r,t)}),Array.from(s.entries()).map(([e,r])=>({id:e,score:r}))},n=()=>{try{let e=localStorage.getItem("viewedProducts");return e?JSON.parse(e):[]}catch(e){return console.error("Error getting viewed products:",e),[]}},c=()=>{try{let e=localStorage.getItem("cartItems");return e?JSON.parse(e):[]}catch(e){return console.error("Error getting cart items:",e),[]}},l=()=>{try{let e=localStorage.getItem("wishlistItems");return e?JSON.parse(e):[]}catch(e){return console.error("Error getting wishlist items:",e),[]}},d=e=>{try{if(!e)return;let r=n(),t=r.findIndex(r=>r.id===e);-1!==t?(r[t].timestamp=Date.now(),r[t].viewCount=(r[t].viewCount||1)+1):r.unshift({id:e,timestamp:Date.now(),viewCount:1});let i=r.slice(0,50);localStorage.setItem("viewedProducts",JSON.stringify(i));let a=u();a&&g(a,e)}catch(e){console.error("Error tracking product view:",e)}},u=()=>{try{return localStorage.getItem("userId")}catch(e){return console.error("Error getting user ID:",e),null}},g=async(e,r)=>{try{await fetch("/api/analytics/product-view",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,productId:r,timestamp:Date.now()})})}catch(e){console.error("Error sending product view to server:",e)}},m=async(e,r,t=4)=>{try{try{let i=await fetch(`/api/recommendations/similar?productId=${e}&categoryId=${r}&limit=${t}`);if(i.ok)return await i.json()}catch(e){console.error("Error fetching similar products from API:",e)}return p(r,t)}catch(e){return console.error("Error getting similar products:",e),[]}},p=(e,r)=>{let t=[{id:1,name:"iPhone 13 Pro OLED Screen",slug:"iphone-13-pro-oled-screen",price:129.99,category_id:1,category_name:"iPhone Parts",image_url:"/images/products/iphone-screen.jpg",rating:4.5,review_count:28,stock:15,discount_percentage:0},{id:2,name:"Samsung Galaxy S22 Battery",slug:"samsung-galaxy-s22-battery",price:39.99,category_id:2,category_name:"Samsung Parts",image_url:"/images/products/samsung-battery.jpg",rating:4.2,review_count:17,stock:23,discount_percentage:15},{id:3,name:"Professional Repair Tool Kit",slug:"professional-repair-tool-kit",price:89.99,category_id:5,category_name:"Repair Tools",image_url:"/images/products/repair-tools.jpg",rating:4.8,review_count:42,stock:8,discount_percentage:0},{id:4,name:'iPad Pro 12.9" LCD Assembly',slug:"ipad-pro-12-9-lcd-assembly",price:199.99,category_id:3,category_name:"iPad Parts",image_url:"/images/products/ipad-screen.jpg",rating:4.6,review_count:13,stock:5,discount_percentage:10},{id:5,name:"iPhone 12 Battery Replacement Kit",slug:"iphone-12-battery-replacement-kit",price:49.99,category_id:1,category_name:"iPhone Parts",image_url:"/images/products/iphone-battery.jpg",rating:4.7,review_count:32,stock:25,discount_percentage:10},{id:6,name:"Samsung Galaxy S21 Screen Assembly",slug:"samsung-galaxy-s21-screen-assembly",price:119.99,category_id:2,category_name:"Samsung Parts",image_url:"/images/products/samsung-screen.jpg",rating:4.5,review_count:18,stock:12,discount_percentage:0},{id:7,name:"iPad Mini 6 Digitizer",slug:"ipad-mini-6-digitizer",price:89.99,category_id:3,category_name:"iPad Parts",image_url:"/images/products/ipad-digitizer.jpg",rating:4.3,review_count:14,stock:8,discount_percentage:5},{id:8,name:"Precision Screwdriver Set",slug:"precision-screwdriver-set",price:29.99,category_id:5,category_name:"Repair Tools",image_url:"/images/products/screwdriver-set.jpg",rating:4.9,review_count:47,stock:35,discount_percentage:0}];return(e?t.filter(r=>r.category_id===parseInt(e)):t).sort(()=>.5-Math.random()).slice(0,r)},_=async(e,r=3)=>{try{try{let t=await fetch(`/api/recommendations/frequently-bought-together?productId=${e}&limit=${r}`);if(t.ok)return await t.json()}catch(e){console.error("Error fetching frequently bought together products from API:",e)}return h(e,r)}catch(e){return console.error("Error getting frequently bought together products:",e),[]}},h=(e,r)=>{let t=[{id:1,name:"iPhone 13 Pro OLED Screen",slug:"iphone-13-pro-oled-screen",price:129.99,category_name:"iPhone Parts",image_url:"/images/products/iphone-13-screen.jpg",rating:4.5,review_count:28,stock:15,discount_percentage:0},{id:2,name:"Samsung Galaxy S22 Battery",slug:"samsung-galaxy-s22-battery",price:39.99,category_name:"Samsung Parts",image_url:"/images/products/samsung-s21-screen.jpg",rating:4.2,review_count:17,stock:23,discount_percentage:15},{id:3,name:"Professional Repair Tool Kit",slug:"professional-repair-tool-kit",price:89.99,category_name:"Repair Tools",image_url:"/images/products/repair-tools.jpg",rating:4.8,review_count:42,stock:8,discount_percentage:0},{id:4,name:'iPad Pro 12.9" LCD Assembly',slug:"ipad-pro-12-9-lcd-assembly",price:199.99,category_name:"iPad Parts",image_url:"/images/products/ipad-screen.jpg",rating:4.6,review_count:13,stock:5,discount_percentage:10},{id:5,name:"iPhone 12 Battery Replacement Kit",slug:"iphone-12-battery-replacement-kit",price:49.99,category_name:"iPhone Parts",image_url:"/images/products/iphone-battery.jpg",rating:4.7,review_count:32,stock:25,discount_percentage:10},{id:6,name:"Samsung Galaxy S21 Screen Assembly",slug:"samsung-galaxy-s21-screen-assembly",price:119.99,category_name:"Samsung Parts",image_url:"/images/products/samsung-screen.jpg",rating:4.5,review_count:18,stock:12,discount_percentage:0},{id:7,name:"iPad Mini 6 Digitizer",slug:"ipad-mini-6-digitizer",price:89.99,category_name:"iPad Parts",image_url:"/images/products/ipad-digitizer.jpg",rating:4.3,review_count:14,stock:8,discount_percentage:5},{id:8,name:"Precision Screwdriver Set",slug:"precision-screwdriver-set",price:29.99,category_name:"Repair Tools",image_url:"/images/products/screwdriver-set.jpg",rating:4.9,review_count:47,stock:35,discount_percentage:0}];return(({1:[5,3,8],2:[6,3,8],3:[1,6,8],4:[7,3,8],5:[1,3,8],6:[2,3,8],7:[4,3,8],8:[1,6,3]})[e]||[]).map(e=>t.find(r=>r.id===e)).filter(Boolean).slice(0,r)}},18253:(e,r,t)=>{"use strict";t.d(r,{HS:()=>s,J8:()=>i,nO:()=>a});let i=(e,r,t)=>{try{if(!e||!r)return;let i=s(),a={query:e.trim().toLowerCase(),productId:r,position:t,timestamp:Date.now(),sessionId:o()};i.unshift(a);let c=i.slice(0,100);localStorage.setItem("searchClicks",JSON.stringify(c)),n(a)}catch(e){console.error("Error tracking search result click:",e)}},a=()=>{try{let e=localStorage.getItem("searchHistory");return e?JSON.parse(e):[]}catch(e){return console.error("Error getting search history:",e),[]}},s=()=>{try{let e=localStorage.getItem("searchClicks");return e?JSON.parse(e):[]}catch(e){return console.error("Error getting search clicks:",e),[]}},o=()=>{let e=sessionStorage.getItem("searchSessionId");return e||(e=`session_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,sessionStorage.setItem("searchSessionId",e)),e},n=async e=>{}}};