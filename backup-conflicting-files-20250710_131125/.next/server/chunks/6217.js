exports.id=6217,exports.ids=[6217],exports.modules={60105:e=>{e.exports={recentlyViewed:"RecentlyViewed_recentlyViewed__OmErO",title:"RecentlyViewed_title__87hHT",subtitle:"RecentlyViewed_subtitle__5jRvp",products:"RecentlyViewed_products__JWSWp",productWrapper:"RecentlyViewed_productWrapper__hvr0m",recentlyViewedLoading:"RecentlyViewed_recentlyViewedLoading__VJ3hL",loadingSpinner:"RecentlyViewed_loadingSpinner__84sbq",spin:"RecentlyViewed_spin__J5rUJ"}},46217:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var i=r(20997),s=r(16689);r(41664);var a=r(56515),l=r(60105),c=r.n(l);let n=({currentProductId:e,limit:t=4,title:r="Recently Viewed",subtitle:l="Products you've viewed recently"})=>{let[n,o]=(0,s.useState)([]),[d,p]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{let r=async()=>{try{p(!0);let r=JSON.parse(localStorage.getItem("recentlyViewed")||"[]"),i=e?r.filter(t=>t!==e):r;if(0===i.length){o([{id:1,name:"iPhone 13 Pro OLED Screen",slug:"iphone-13-pro-oled-screen",price:129.99,category_name:"iPhone Parts",image_url:"/images/products/iphone-screen.jpg",rating:4.5,review_count:28,stock:15},{id:2,name:"Samsung Galaxy S22 Battery",slug:"samsung-galaxy-s22-battery",price:39.99,category_name:"Samsung Parts",image_url:"/images/products/samsung-battery.jpg",rating:4.2,review_count:17,stock:23},{id:3,name:"Professional Repair Tool Kit",slug:"professional-repair-tool-kit",price:89.99,category_name:"Repair Tools",image_url:"/images/products/repair-tools.jpg",rating:4.8,review_count:42,stock:8},{id:4,name:'iPad Pro 12.9" LCD Assembly',slug:"ipad-pro-12-9-lcd-assembly",price:199.99,category_name:"iPad Parts",image_url:"/images/products/ipad-screen.jpg",rating:4.6,review_count:13,stock:5}]),p(!1);return}let s=i.slice(0,t),a=await fetch(`/api/products/batch?ids=${s.join(",")}`);if(!a.ok)throw Error("Failed to fetch recently viewed products");let l=await a.json();o(l)}catch(e){console.error("Error loading recently viewed products:",e),o([])}finally{p(!1)}};e&&(()=>{if(e)try{let t=JSON.parse(localStorage.getItem("recentlyViewed")||"[]").filter(t=>t!==e);t.unshift(e);let r=t.slice(0,20);localStorage.setItem("recentlyViewed",JSON.stringify(r))}catch(e){console.error("Error updating recently viewed products:",e)}})(),r()},[e,t]),d)?i.jsx("div",{className:c().recentlyViewedLoading,children:i.jsx("div",{className:c().loadingSpinner})}):0===n.length?null:i.jsx("section",{className:c().recentlyViewed,children:(0,i.jsxs)("div",{className:"container",children:[i.jsx("h2",{className:c().title,children:r}),i.jsx("p",{className:c().subtitle,children:l}),i.jsx("div",{className:c().products,children:n.map(e=>i.jsx("div",{className:c().productWrapper,children:i.jsx(a.Z,{product:e})},e.id))})]})})}}};